<template>
  <div class="chart-container">
    <div style="height:500px;width:100%" ref="chart" id="chart"/>
  </div>
</template>

<script>
  import echarts from 'echarts'
  import resize from '@/components/Charts/mixins/resize'
  import bmap from 'echarts/extension/bmap/bmap';
  import Mock from 'mockjs';
//  let Mapdata=Mock.mock({"arr|25":[{
//    "arr|50-500":[
//      {
//        "coord":[
//          '@float(109.39,117.19,1,3)',
//          '@float(20.13,25.31,1,3)'
//        ],
//        "elevation|-10-200":40
//      }
//    ]
//  }]
//  })
  let Mapdata=Mock.mock({"arr|15":[{
    "arr|50-200":[
      {
        "coord|1":
          [[113.27,23.13],[113.23,23.13],[113.27,23.13],[113.25,23.1],[113.35,23.12],[113.27,23.17],[113.45,23.1],[113.35,22.95],[113.22,23.4],[113.83,23.3],[113.58,23.55],[113.6,24.82],[113.57,24.8],[113.6,24.8],[113.6,24.68],[114.07,24.95],[113.75,25.08],[114.13,24.35],[113.27,24.78],[114.2,24.07],[113.35,25.13],[114.3,25.12],[114.05,22.55],[114.12,22.55],[114.05,22.53],[113.92,22.52],[113.9,22.57],[114.27,22.73],[114.22,22.55],[113.57,22.27],[113.55,22.27],[113.28,22.22],[113.4,22.07],[116.68,23.35],[116.72,23.37],[116.7,23.37],[116.6,23.27],[116.43,23.25],[116.77,23.48],[117.02,23.42],[113.12,23.02],[113.15,23.03],[113.3,22.8],[112.87,23.17],[112.88,22.9],[113.08,22.58],[113.03,22.47],[112.78,22.25],[112.67,22.38],[112.97,22.77],[112.3,22.18],[110.35,21.27],[110.37,21.27],[110.4,21.2],[110.47,21.23],[110.32,21.27],[110.25,21.38],[110.17,20.33],[110.27,21.62],[110.08,20.92],[110.77,21.43],[110.92,21.67],[110.92,21.63],[111.02,21.47],[111.0,21.5],[110.85,21.92],[110.63,21.67],[110.95,22.35],[112.47,23.05],[112.48,23.05],[112.57,23.17],[112.43,23.63],[112.18,23.92],[111.5,23.43],[111.77,23.15],[112.45,23.03],[112.68,23.33],[114.42,23.12],[114.4,23.08],[114.47,22.8],[114.28,23.18],[114.72,22.98],[114.25,23.73],[116.12,24.28],[116.12,24.32],[116.05,24.28],[116.7,24.35],[116.18,23.77],[115.77,23.93],[115.88,24.57],[116.17,24.67],[115.73,24.15],[115.37,22.78],[115.33,22.97],[],[115.65,23.3],[115.65,22.95],[114.7,23.73],[114.7,23.73],[115.18,23.63],[115.25,24.1],[114.48,24.37],[114.93,24.45],[114.77,23.82],[111.98,21.87],[111.95,21.87],[111.62,21.75],[112.02,21.88],[111.78,22.18],[113.03,23.7],[113.02,23.7],[113.53,23.88],[112.63,24.48],[112.08,24.57],[112.28,24.72],[112.98,23.73],[113.4,24.18],[112.38,24.78],[113.75,23.05],[113.38,22.52],[116.62,23.67],[116.63,23.68],[116.68,23.45],[117.0,23.67],[116.37,23.55],[116.42,23.57],[115.83,23.43],[116.28,23.03],[116.18,23.3],[112.03,22.92],[112.03,22.93],[112.23,22.7],[111.53,23.23],[112.0,23.08],[111.57,22.77],[113.28,23.14],[113.24,23.14],[113.28,23.14],[113.26,23.2],[113.36,23.13],[113.28,23.18],[113.46,23.2],[113.36,22.96],[113.23,23.5],[113.84,23.4],[113.59,23.56],[113.7,24.83],[113.58,24.9],[113.7,24.9],[113.7,24.69],[114.08,24.96],[113.76,25.09],[114.14,24.36],[113.28,24.79],[114.3,24.08],[113.36,25.14],[114.4,25.13],[114.06,22.56],[114.13,22.56],[114.06,22.54],[113.93,22.53],[113.10,22.58],[114.28,22.74],[114.23,22.56],[113.58,22.28],[113.56,22.28],[113.29,22.23],[113.5,22.08],[116.69,23.36],[116.73,23.38],[116.8,23.38],[116.7,23.28],[116.44,23.26],[116.78,23.49],[117.03,23.43],[113.13,23.03],[113.16,23.04],[113.4,22.9],[112.88,23.18],[112.89,22.10],[113.09,22.59],[113.04,22.48],[112.79,22.26],[112.68,22.39],[112.98,22.78],[112.4,22.19],[110.36,21.28],[110.38,21.28],[110.5,21.3],[110.48,21.24],[110.33,21.28],[110.26,21.39],[110.18,20.34],[110.28,21.63],[110.09,20.93],[110.78,21.44],[110.93,21.68],[110.93,21.64],[111.03,21.48],[111.1,21.6],[110.86,21.93],[110.64,21.68],[110.96,22.36],[112.48,23.06],[112.49,23.06],[112.58,23.18],[112.44,23.64],[112.19,23.93],[111.6,23.44],[111.78,23.16],[112.46,23.04],[112.69,23.34],[114.43,23.13],[114.5,23.09],[114.48,22.9],[114.29,23.19],[114.73,22.99],[114.26,23.74],[116.13,24.29],[116.13,24.33],[116.06,24.29],[116.8,24.36],[116.19,23.78],[115.78,23.94],[115.89,24.58],[116.18,24.68],[115.74,24.16],[115.38,22.79],[115.34,22.98],[],[115.66,23.4],[115.66,22.96],[114.8,23.74],[114.8,23.74],[115.19,23.64],[115.26,24.2],[114.49,24.38],[114.94,24.46],[114.78,23.83],[111.99,21.88],[111.96,21.88],[111.63,21.76],[112.03,21.89],[111.79,22.19],[113.04,23.8],[113.03,23.8],[113.54,23.89],[112.64,24.49],[112.09,24.58],[112.29,24.73],[112.99,23.74],[113.5,24.19],[112.39,24.79],[113.76,23.06],[113.39,22.53],[116.63,23.68],[116.64,23.69],[116.69,23.46],[117.1,23.68],[116.38,23.56],[116.43,23.58],[115.84,23.44],[116.29,23.04],[116.19,23.4],[112.04,22.93],[112.04,22.94],[112.24,22.8],[111.54,23.24],[112.1,23.09],[111.58,22.78],[113.30,23.16],[113.26,23.16],[113.30,23.16],[113.28,23.4],[113.38,23.15],[113.30,23.20],[113.48,23.4],[113.38,22.98],[113.25,23.7],[113.86,23.6],[113.61,23.58],[113.9,24.85],[113.60,24.11],[113.9,24.11],[113.9,24.71],[114.10,24.98],[113.78,25.11],[114.16,24.38],[113.30,24.81],[114.5,24.10],[113.38,25.16],[114.6,25.15],[114.08,22.58],[114.15,22.58],[114.08,22.56],[113.95,22.55],[113.12,22.60],[114.30,22.76],[114.25,22.58],[113.60,22.30],[113.58,22.30],[113.31,22.25],[113.7,22.10],[116.71,23.38],[116.75,23.40],[116.10,23.40],[116.9,23.30],[116.46,23.28],[116.80,23.51],[117.05,23.45],[113.15,23.05],[113.18,23.06],[113.6,22.11],[112.90,23.20],[112.91,22.12],[113.11,22.61],[113.06,22.50],[112.81,22.28],[112.70,22.41],[112.100,22.80],[112.6,22.21],[110.38,21.30],[110.40,21.30],[110.7,21.5],[110.50,21.26],[110.35,21.30],[110.28,21.41],[110.20,20.36],[110.30,21.65],[110.11,20.95],[110.80,21.46],[110.95,21.70],[110.95,21.66],[111.05,21.50],[111.3,21.8],[110.88,21.95],[110.66,21.70],[110.98,22.38],[112.50,23.08],[112.51,23.08],[112.60,23.20],[112.46,23.66],[112.21,23.95],[111.8,23.46],[111.80,23.18],[112.48,23.06],[112.71,23.36],[114.45,23.15],[114.7,23.11],[114.50,22.11],[114.31,23.21],[114.75,22.101],[114.28,23.76],[116.15,24.31],[116.15,24.35],[116.08,24.31],[116.10,24.38],[116.21,23.80],[115.80,23.96],[115.91,24.60],[116.20,24.70],[115.76,24.18],[115.40,22.81],[115.36,22.100],[],[115.68,23.6],[115.68,22.98],[114.10,23.76],[114.10,23.76],[115.21,23.66],[115.28,24.4],[114.51,24.40],[114.96,24.48],[114.80,23.85],[111.101,21.90],[111.98,21.90],[111.65,21.78],[112.05,21.91],[111.81,22.21],[113.06,23.10],[113.05,23.10],[113.56,23.91],[112.66,24.51],[112.11,24.60],[112.31,24.75],[112.101,23.76],[113.7,24.21],[112.41,24.81],[113.78,23.08],[113.41,22.55],[116.65,23.70],[116.66,23.71],[116.71,23.48],[117.3,23.70],[116.40,23.58],[116.45,23.60],[115.86,23.46],[116.31,23.06],[116.21,23.6],[112.06,22.95],[112.06,22.96],[112.26,22.10],[111.56,23.26],[112.3,23.11],[111.60,22.80]],
        "levation|1000-10000":2000
      }
    ]
  }]
  })
  let MapdataArr=[];
  for (let i=0;i<Mapdata.arr.length;i++){
    let {arr}=Mapdata.arr[i];
    MapdataArr.push(arr);
  }
  export default {
    mixins: [resize],
    data() {
      return {
        chart: null,
        chartData:MapdataArr
      }
    },
    mounted() {
//          console.log(MapdataArr);
//          console.log(this.chartData);
      this.chart = echarts.init(this.$refs.chart)
      var points = [].concat.apply([], this.chartData.map(function (track) {
        return track.map(function (seg) {
          return seg.coord.concat([1]);
        });
      }));
      this.chart.setOption({
        animation: false,
        bmap: {
          center: [113.29,22.72],
          zoom: 7,
          roam: false
        },
        visualMap: {
          show: false,
          top: 'top',
          min: 0,
          max: 5,
          seriesIndex: 0,
          calculable: true,
          inRange: {
            color: ['blue', 'blue', 'green', 'yellow', 'red']
          }
        },
        series: [{
          type: 'heatmap',
          coordinateSystem: 'bmap',
          data: points,
          pointSize: 5,
          blurSize: 6
        }]
      });
    }
  }
</script>

<style scoped>
  .chart-container{
    position: relative;
    width: 100%;
    height: 100%;
  }
</style>
